---
title: Animated TIE Fighter
author: Jake Thompson
date: '2018-05-04'
categories:
  - rstats
tags:
  - ggplot2
  - gganimate
---

<script src="{{< relref "post/2018-05-04-animated-tie-fighter/index.html" >}}index_files/header-attrs/header-attrs.js"></script>
<link href="{{< relref "post/2018-05-04-animated-tie-fighter/index.html" >}}index_files/anchor-sections/anchor-sections.css" rel="stylesheet" />
<script src="{{< relref "post/2018-05-04-animated-tie-fighter/index.html" >}}index_files/anchor-sections/anchor-sections.js"></script>


<p>Recently I’ve been looking for an excuse to try out <a href="https://twitter.com/thomasp85">Thomas Lin Pedersen’s</a> new grammar of animation, which is an extension of <a href="http://ggplot2.tidyverse.org"><strong>ggplot2</strong></a> and a retooling of the existing <a href="https://github.com/thomasp85/gganimate/tree/v0.1.1"><strong>gganmiate</strong></a> package. You can find the new package <a href="https://github.com/thomasp85/gganimate">here</a>.</p>
<p>Luckily for me, Rafael Irizarry provided the perfect inspiration:</p>
{{% tweet "992397723532963841" %}}
<p>So in honor of Star Wars day, I decided to create Rafael’s TIE fighter GIF using the new <strong>gganimate</strong>. Before we start, we need to install <strong>gganimate</strong> from GitHub, and load the packages we’ll need.</p>
<pre class="r"><code># devtools::install_github(&quot;thomasp85/gganimate&quot;)
library(tidyverse)
library(gganimate)</code></pre>
<div id="create-data-to-plot" class="section level2">
<h2>Create data to plot</h2>
<p>We first need to create a data set. We’ll start by defining the number of locations we want our TIE fighter to float between. Here, I’ve set this to be 20 locations. Next, we create the data frame. We set an <code>id</code> for each location, set a random <code>x</code> and <code>y</code> coordinate for each, and then make the label be the shape of the TIE fighter (I’ve also set a random seed so we can exactly replicated these locations later).</p>
<pre class="r"><code>set.seed(20180504)

locations &lt;- 20

tie_data &lt;- data_frame(
  id = seq_len(locations),
  x = runif(locations),
  y = runif(locations),
  label = &quot;|-o-|&quot;
)

tie_data
#&gt; # A tibble: 20 x 4
#&gt;       id      x      y label
#&gt;    &lt;int&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;
#&gt;  1     1 0.178  0.118  |-o-|
#&gt;  2     2 0.879  0.263  |-o-|
#&gt;  3     3 0.727  0.0742 |-o-|
#&gt;  4     4 0.0797 0.233  |-o-|
#&gt;  5     5 0.727  0.0179 |-o-|
#&gt;  6     6 0.623  0.495  |-o-|
#&gt;  7     7 0.943  0.0155 |-o-|
#&gt;  8     8 0.513  0.931  |-o-|
#&gt;  9     9 0.731  0.933  |-o-|
#&gt; 10    10 0.915  0.980  |-o-|
#&gt; 11    11 0.628  0.330  |-o-|
#&gt; 12    12 0.326  0.843  |-o-|
#&gt; 13    13 0.158  0.833  |-o-|
#&gt; 14    14 0.332  0.181  |-o-|
#&gt; 15    15 0.576  0.439  |-o-|
#&gt; 16    16 0.795  0.252  |-o-|
#&gt; 17    17 0.505  0.718  |-o-|
#&gt; 18    18 0.179  0.625  |-o-|
#&gt; 19    19 0.895  0.698  |-o-|
#&gt; 20    20 0.721  0.968  |-o-|</code></pre>
</div>
<div id="create-a-static-plot" class="section level2">
<h2>Create a static plot</h2>
<p>Now that we have our data, we can the plot out all of the locations at once to see where our TIE fighter will be flying to. To make it more space like, we can make the plot background black using <code>theme</code>, and make our TIE fighters white and bold. Finally, our TIE fighters will be centered on the <code>x</code> and <code>y</code> coordinates we generated by default. This means that when the coordinates are close to the edge, we risk the wings getting cut off by the plot borders. One solution would be to set the horizontal and vertical alignment based on the coordinates. However, an easier solution is just to expand the limits of the plot using <code>expand_limits</code>, to make sure there is enough padding all the way around.</p>
<pre class="r"><code>ggplot(tie_data, aes(x = x, y = y, label = label)) +
  geom_text(color = &quot;white&quot;, fontface = &quot;bold&quot;, size = 12) +
  expand_limits(x = c(-0.1, 1.1), y = c(-0.1, 1.1)) +
  theme_void() +
  theme(panel.background = element_rect(fill = &quot;black&quot;))</code></pre>
<p><img src="{{< relref "post/2018-05-04-animated-tie-fighter/index.html" >}}index_files/figure-html/static-plot-1.png" width="80%" style="display: block; margin: auto;" /></p>
</div>
<div id="create-an-animated-plot" class="section level2">
<h2>Create an animated plot</h2>
<p>Finally, we can animate the plot using <strong>gganmiate</strong> with just one additional line of code! We simply add a <code>transition_states</code> call, and specify that each <code>id</code> is its own state. We can also specify the relative length of the states and the transitions between them.</p>
<pre class="r"><code>ggplot(tie_data, aes(x = x, y = y, label = label)) +
  geom_text(color = &quot;white&quot;, fontface = &quot;bold&quot;, size = 12) +
  expand_limits(x = c(-0.1, 1.1), y = c(-0.1, 1.1)) +
  theme_void() +
  theme(panel.background = element_rect(fill = &quot;black&quot;)) +
  transition_states(id, transition_length = 4, state_length = 1)</code></pre>
<p><img src="https://media.giphy.com/media/hNsXC8pFnpzAnBRG77/giphy.gif" /></p>
<p>And that’s it! Just like that we have an animated TIE fighter using <strong>ggplot2</strong> and <strong>gganimate</strong>! Happy Star Wars day!</p>
</div>
